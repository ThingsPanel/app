<view class="pagehome"><view class="tp-box tp-box-sizing tp-flex tp-flex-col"><view class="tp-panel tp-flex tp-flex-col tp-pd-l-r-30"><view class="tp-ipt-item tp-flex tp-flex-row tp-flex-j-l tp-flex-a-c tp-box-sizing tp-pd-t-b-25"><view>策略名称</view><input class="tp-flex-1 tp-mg-l-20" type="text" placeholder="请输入名称" placeholder-class="tp-plc" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['formData']]]]]}}" value="{{formData.name}}" bindinput="__e"/></view><view class="tp-ipt-item tp-flex tp-flex-row tp-flex-j-l tp-flex-a-c tp-box-sizing tp-pd-t-b-25"><view>策略描述</view><input class="tp-flex-1 tp-mg-l-20" type="text" placeholder="请输入描述" placeholder-class="tp-plc" data-event-opts="{{[['input',[['__set_model',['$0','describe','$event',[]],['formData']]]]]}}" value="{{formData.describe}}" bindinput="__e"/></view></view><view class="tp-panel tp-flex tp-flex-col tp-pd-l-r-30 tp_pd_l_r_80"><view class="tp-ipt-item tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c tp-box-sizing tp-pd-t-b-25"><view>请选择设备分组</view><view data-event-opts="{{[['tap',[['toSelectGroup',['$event']]]]]}}" class="tp-flex-1 tp-flex tp-flex-row tp-flex-j-r tp-flex-a-c" bindtap="__e"><block wx:if="{{formData.groupName}}"><text class="tp-mg-r-10">{{formData.groupName}}</text></block><view class="iconfont iconjiantou1"></view></view></view><view class="tp-ipt-item tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c tp-box-sizing tp-pd-t-b-25"><view>请选择设备</view><view data-event-opts="{{[['tap',[['toSelectEqp',['$event']]]]]}}" class="tp-flex-1 tp-flex tp-flex-row tp-flex-j-r tp-flex-a-c" bindtap="__e"><block wx:if="{{formData.eqpName}}"><text class="tp-mg-r-10">{{formData.eqpName}}</text></block><view class="iconfont iconjiantou1"></view></view></view></view><view class="tp-txt tp-box-sizing tp-pd-30">触发条件<view data-event-opts="{{[['tap',[['toAdd',['$event']]]]]}}" class="add_btn" bindtap="__e">+新增一行</view></view><block wx:for="{{rulesList}}" wx:for-item="rule" wx:for-index="index" wx:key="index"><view class="tp-panel tp-flex tp-flex-col tp-pd-l-r-30 tp_pd_l_r_80"><block wx:if="{{rule.gxName}}"><view class="info_header"><view class="tp-circle tp-mg-l-r-20 tp-active" style="margin-left:10rpx;"></view><view class="info_header_d">{{''+rule.gxName+''}}</view></view></block><view class="tp-ipt-item tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c tp-box-sizing tp-pd-t-b-25"><view>请选择条件</view><view data-event-opts="{{[['tap',[['toSelectTj',['$0','edit'],[[['rulesList','',index]]]]]]]}}" class="tp-flex-1 tp-flex tp-flex-row tp-flex-j-r tp-flex-a-c" bindtap="__e"><block wx:if="{{rule.tjName}}"><text class="tp-mg-r-10">{{rule.tjName}}</text></block><view class="iconfont iconjiantou1"></view></view></view><view class="tp-ipt-item tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c tp-box-sizing tp-pd-t-b-25"><view>请选择符号</view><view data-event-opts="{{[['tap',[['toSelectFh',['$0'],[[['rulesList','',index]]]]]]]}}" class="tp-flex-1 tp-flex tp-flex-row tp-flex-j-r tp-flex-a-c" bindtap="__e"><block wx:if="{{rule.fhName}}"><text class="tp-mg-r-10">{{rule.fhName}}</text></block><view class="iconfont iconjiantou1"></view></view></view><view class="tp-ipt-item tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c tp-box-sizing tp-pd-t-b-25"><view>请输入值</view><block wx:if="{{rule.filedType==3}}"><input class="tp-flex-1 tp-mg-l-20" type="number" placeholder="请输入数值" placeholder-class="tp-plc" data-event-opts="{{[['input',[['__set_model',['$0','num','$event',[]],[[['rulesList','',index]]]]]]]}}" value="{{rule.num}}" bindinput="__e"/></block><block wx:else><input class="tp-flex-1 tp-mg-l-20" type="text'" placeholder="请输入数值" placeholder-class="tp-plc" data-event-opts="{{[['input',[['__set_model',['$0','num','$event',[]],[[['rulesList','',index]]]]]]]}}" value="{{rule.num}}" bindinput="__e"/></block></view><block wx:if="{{index!=0}}"><view class="tp-ipt-item tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c tp-box-sizing tp-pd-t-b-25"><view data-event-opts="{{[['tap',[['toDel',['$0',index],['data']]]]]}}" class="del_btn" bindtap="__e"><image src="../../static/icon/del.png" alt></image>删除</view></view></block></view></block><view class="tp-panel tp-panel-textarea tp-flex tp-flex-col tp-mg-30 tp-box-sizing tp-pd-20"><view class="tp-mg-b-20">信息</view><view><textarea class="tp-box-sizing tp-pd-20" placeholder="请在此处填写信息" placeholder-class="tp-plc-i" data-event-opts="{{[['input',[['__set_model',['$0','message','$event',[]],['formData']]]]]}}" value="{{formData.message}}" bindinput="__e"></textarea></view></view><view class="tp-box-sizing tp-pd-l-r-30"><button data-event-opts="{{[['tap',[['doUpdateSubmit',['$event']]]]]}}" class="{{['tp-btn',(disabled)?'vc-btn-disabled':'']}}" bindtap="__e">保
				存</button></view><uni-popup class="vue-ref" vue-id="fc82237c-1" type="bottom" data-ref="groupPopup" bind:__l="__l" vue-slots="{{['default']}}"><scroll-view style="{{'max-height:'+('700rpx')+';'}}" scroll-y="{{true}}" scroll-with-animation="true"><view class="selectlist"><block wx:for="{{eqpGroupsList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['toConfirmeqpGroup',['$0'],[[['eqpGroupsList','',index]]]]]]]}}" class="select_item" bindtap="__e">{{''+item.device_group+''}}</view></block></view></scroll-view></uni-popup><uni-popup class="vue-ref" vue-id="fc82237c-2" type="bottom" data-ref="epqPopup" bind:__l="__l" vue-slots="{{['default']}}"><scroll-view style="{{'max-height:'+('700rpx')+';'}}" scroll-y="{{true}}" scroll-with-animation="true"><view class="selectlist"><block wx:for="{{eqpList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['comfirEqp',['$0'],[[['eqpList','',index]]]]]]]}}" class="select_item" bindtap="__e">{{''+item.name+''}}</view></block></view></scroll-view></uni-popup><uni-popup class="vue-ref" vue-id="fc82237c-3" type="bottom" data-ref="tiaojianPopup" bind:__l="__l" vue-slots="{{['default']}}"><scroll-view style="{{'max-height:'+('700rpx')+';'+('background:'+('#fff')+';')}}" scroll-y="{{true}}" scroll-with-animation="true"><view class="selectlist"><block wx:for="{{conditionList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['confirmCondition',['$0'],[[['conditionList','',index]]]]]]]}}" class="select_item" bindtap="__e">{{''+item.name+''}}</view></block></view></scroll-view></uni-popup><uni-popup class="vue-ref" vue-id="fc82237c-4" type="bottom" data-ref="fuhaoPopup" bind:__l="__l" vue-slots="{{['default']}}"><scroll-view style="{{'max-height:'+('700rpx')+';'+('background:'+('#fff')+';')}}" scroll-y="{{true}}" scroll-with-animation="true"><view class="selectlist"><block wx:for="{{fuhaoList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['confirmFh',['$0'],[[['fuhaoList','',index]]]]]]]}}" class="select_item" bindtap="__e">{{''+item.name+''}}</view></block></view></scroll-view></uni-popup><uni-popup class="vue-ref" vue-id="fc82237c-5" type="bottom" data-ref="relationshipPopup" bind:__l="__l" vue-slots="{{['default']}}"><scroll-view style="{{'max-height:'+('700rpx')+';'+('background:'+('#fff')+';')}}" scroll-y="{{true}}" scroll-with-animation="true"><view class="selectlist"><block wx:for="{{relationshipList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['confirmrRelationship',['$0'],[[['relationshipList','',index]]]]]]]}}" class="select_item" bindtap="__e">{{''+item.name+''}}</view></block></view></scroll-view></uni-popup><uni-popup class="vue-ref" vue-id="fc82237c-6" type="bottom" mask="{{true}}" maskClick="{{true}}" data-ref="addFormPopup" bind:__l="__l" vue-slots="{{['default']}}"><view class="logInfo"><view class="info_title">新增触发条件<image src="../../static/icon/close.png" alt data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" bindtap="__e"></image></view><view class="info_header"><view class="tp-circle tp-mg-l-r-20 tp-active" style="margin-left:10rpx;"></view><view class="info_header_d">{{''+addForm.gxName+''}}</view><label data-event-opts="{{[['tap',[['relationship']]]]}}" class="info_header_t _span" bindtap="__e"><view class="iconfont iconjiantou1"></view></label></view><view class="info_list"><view data-event-opts="{{[['tap',[['toSelectTjAdd',['$event']]]]]}}" class="item" bindtap="__e"><view class="value">请选择条件：</view><view class="label">{{''+addForm.tjName+''}}</view><view class="iconfont iconjiantou1"></view></view><view data-event-opts="{{[['tap',[['toSelectFhAdd',['$event']]]]]}}" class="item" bindtap="__e"><view class="value">请选择符号：</view><view class="label">{{''+addForm.fhName+''}}</view><view class="iconfont iconjiantou1"></view></view><view class="item"><view class="value">数值：</view><block wx:if="{{addForm.filedType==3}}"><input class="tp-flex-1 tp-mg-l-20 add_input" type="number" placeholder="请输入数值" placeholder-class="tp-plc" data-event-opts="{{[['input',[['__set_model',['$0','num','$event',[]],['addForm']]]]]}}" value="{{addForm.num}}" bindinput="__e"/></block><block wx:else><input class="tp-flex-1 tp-mg-l-20 add_input" type="text" placeholder="请输入数值" placeholder-class="tp-plc" data-event-opts="{{[['input',[['__set_model',['$0','num','$event',[]],['addForm']]]]]}}" value="{{addForm.num}}" bindinput="__e"/></block></view></view><view class="info_btn"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="btn_del" bindtap="__e">取消</view><view data-event-opts="{{[['tap',[['saveAddForm']]]]}}" class="btn_save" bindtap="__e">保存</view></view></view></uni-popup><cys-toast class="vue-ref" vue-id="fc82237c-7" msg="{{toast.msg}}" location="top" data-ref="toast" bind:__l="__l"></cys-toast></view></view>