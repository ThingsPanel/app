{"version":3,"sources":["uni-app:///main.js","webpack:///E:/project/Y-渔业可视化/ThingsPanelPig0110/ThingsPanelPig/pages/intelligent-control/intelligent-control.vue?8f05","webpack:///E:/project/Y-渔业可视化/ThingsPanelPig0110/ThingsPanelPig/pages/intelligent-control/intelligent-control.vue?acfc","webpack:///E:/project/Y-渔业可视化/ThingsPanelPig0110/ThingsPanelPig/pages/intelligent-control/intelligent-control.vue?3483","webpack:///E:/project/Y-渔业可视化/ThingsPanelPig0110/ThingsPanelPig/pages/intelligent-control/intelligent-control.vue?31ca","uni-app:///pages/intelligent-control/intelligent-control.vue","webpack:///E:/project/Y-渔业可视化/ThingsPanelPig0110/ThingsPanelPig/pages/intelligent-control/intelligent-control.vue?80a6","webpack:///E:/project/Y-渔业可视化/ThingsPanelPig0110/ThingsPanelPig/pages/intelligent-control/intelligent-control.vue?57cb"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,qI,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,2BAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgI;AAChI;AACuE;AACL;AACa;;;AAG/E;AAC0M;AAC1M,gBAAgB,kNAAU;AAC1B,EAAE,yFAAM;AACR,EAAE,8FAAM;AACR,EAAE,uGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,gQAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAAsyB,CAAgB,szBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmD1zB;AACA;AACA,gBADA,EADA;;AAIA,MAJA,kBAIA;AACA;AACA;AACA,eADA,EADA;;AAIA,oBAJA;AAKA,oBALA;AAMA,uBANA;AAOA,mBAPA;AAQA,iBARA;AASA;AACA,gBADA;AAEA,mBAFA;;AAIA;AACA;AACA;AACA;AAPA,OATA;AAkBA,kBAlBA;AAmBA;AACA,kBADA;AAEA,qBAFA;;AAIA;AACA,kBADA;AAEA,qBAFA,EAJA,CAnBA;;;AA4BA,oBA5BA;AA6BA,sBA7BA;;AA+BA,GApCA;AAqCA,QArCA,oBAqCA;;AAEA,GAvCA;AAwCA,QAxCA,oBAwCA;AACA,wCADA,CACA;AACA;AACA;AACA,oCADA;AAEA,yCAFA,EADA;;;AAMA;AACA;AACA;AACA;AACA,KAFA,MAEA;AACA;AACA;AACA;AACA,GAxDA;AAyDA;AACA;AACA,WAFA,mBAEA,EAFA,EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA,KAbA;AAcA;AACA,iBAfA,2BAeA;AACA;AACA;AACA,oBADA;;AAGA;AACA,+CADA,EACA;AACA,2CAFA;AAGA,iBAHA;AAIA,YAJA,EAIA,IAJA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA;AACA;AACA,WAZA,MAYA;AACA;AACA;AACA;AACA;;AAEA,SArBA,MAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAjCA;AAkCA,KAtDA;AAuDA;AACA,eAxDA,yBAwDA;AACA;AACA;AACA,oBADA;;AAGA;AACA,uCADA;AAEA,2CAFA;AAGA,iBAHA;AAIA,YAJA,EAIA,IAJA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA;AACA;AACA,WAZA,MAYA;AACA;AACA;AACA;AACA;;AAEA,SArBA,MAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAjCA,EAiCA,OAjCA,CAiCA;AACA;AACA,OAnCA;AAoCA,KAjGA;AAkGA;AACA,UAnGA,kBAmGA,IAnGA,EAmGA;AACA;AACA;AACA,8DADA;;AAGA;AACA;AACA;AACA,4DADA;;AAGA;AACA,KA9GA;AA+GA;AACA,UAhHA,oBAgHA;AACA;AACA;AACA,KAnHA;AAoHA;AACA,WArHA,qBAqHA;AACA;AACA;AACA,sBADA;;AAGA;AACA,+BADA;AAEA,cAFA,EAEA,IAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SATA;AAUA;AACA;AACA;AACA,sBADA;;AAGA;AACA,+BADA;AAEA,cAFA,EAEA,IAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SATA;AAUA;AACA,KApJA;AAqJA;AACA,SAtJA,iBAsJA,IAtJA,EAsJA;AACA;AACA;AACA,KAzJA;AA0JA;AACA;AACA;AACA,KA7JA;AA8JA;AACA;AACA;AACA;AACA,6CADA;;AAGA;AACA;AACA;AACA,iDADA;;AAGA;;AAEA,KA3KA;AA4KA;AACA,kBA7KA,0BA6KA,CA7KA,EA6KA;AACA;AACA;AACA;AACA,KAjLA;AAkLA;AACA,WAnLA,qBAmLA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,iBADA,mBACA,GADA,EACA;AACA;AACA;AACA;AACA,sCADA;AAEA,iEAFA;AAGA,oDAHA;AAIA,gCAJA;AAKA,sDALA;AAMA,yEANA;;AAQA;AACA,0BADA;;AAGA;AACA;AACA;AACA,+BADA;AAEA,8BAFA;;AAIA;AACA;AACA;AACA;AACA;AACA,eAVA,MAUA;AACA;AACA;AACA;AACA;AACA,aAhBA;AAiBA,WAhCA;;;AAmCA;AACA,KA7NA;AA8NA;AACA,gBA/NA,0BA+NA;AACA;AACA,KAjOA;AAkOA;AACA,WAnOA,qBAmOA;AACA;AACA;AACA;AACA,kBADA;AAEA,eAFA,mBAEA,OAFA,EAEA;AACA;AACA;AACA;AACA;AACA;AACA,SARA;AASA;AACA;AACA,SAXA;;AAaA,KAnPA,EAzDA,E;;;;;;;;;;;;;ACnDA;AAAA;AAAA;AAAA;AAAkoC,CAAgB,qnCAAG,EAAC,C;;;;;;;;;;;ACAtpC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/intelligent-control/intelligent-control.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/intelligent-control/intelligent-control.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./intelligent-control.vue?vue&type=template&id=3e9193d4&\"\nvar renderjs\nimport script from \"./intelligent-control.vue?vue&type=script&lang=js&\"\nexport * from \"./intelligent-control.vue?vue&type=script&lang=js&\"\nimport style0 from \"./intelligent-control.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/intelligent-control/intelligent-control.vue\"\nexport default component.exports","export * from \"-!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./intelligent-control.vue?vue&type=template&id=3e9193d4&\"","var components\ntry {\n  components = {\n    uniPopup: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.isMore = !_vm.isMore\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./intelligent-control.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./intelligent-control.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"tp-box tp-box-sizing tp-pd-b-30\">\r\n\t\t<view class=\"tp-control tp-flex tp-felx-row tp-flex-j-s tp-flex-a-c tp-pd-l-r-30 tp-pd-t-25 tp-pd-b-10 tp-fixed\" style=\"background: #EEE;\">\r\n\t\t\t<view class=\"tp-tab tp-flex tp-flex-row tp-flex-j-l tp-flex-a-c\">\r\n\t\t\t\t<view v-for=\"(item,index) in tabData\" :key=\"index\" class=\"tp-mg-r-30\"\r\n\t\t\t\t\t:class=\" index === tabIndex ?'tp-active':'' \" @tap=\"doTab(index)\">{{item.title}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"tp-strategy-select tp-flex tp-flex-row tp-flex-j-r tp-flex-a-c\" @click=\"isMore=!isMore\"\r\n\t\t\t\tstyle=\"position: relative;\">\r\n\t\t\t\t<text>{{clName}}</text>\r\n\t\t\t\t<view class=\"iconfont iconjiantou tp-mg-l-10\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"moreitem\" v-if=\"isMore\">\r\n\t\t\t\t<view class=\"item_i\" v-for=\"(m,i) in clData\" :key=\"i\" @click=\"changCl(m)\">{{m.label}}</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"tp-pd-l-r-30\">\r\n\t\t\t<view class=\"tp-tmp\"></view>\r\n\t\t\t<view class=\"tp-strategy-add-btn tp-flex tp-flex-row tp-flex-j-c tp-flex-a-c\" @click=\"doOpenAlertStrategy\">\t\t\t\t<text>+新增{{clName}}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"tp-panel tp-flex tp-flex-col\" v-if=\"dataList.length>0\">\r\n\t\t\t\t<block v-for=\"(item,index) in dataList\" :key=\"index\">\r\n\t\t\t\t\t<view class=\"tp-strategy-item tp-flex tp-flex-col tp-mg-t-25 tp-box-sizing tp-pd-20\">\r\n\t\t\t\t\t\t<view class=\"tp-pd-t-b-05\">{{item.name}}</view>\r\n\t\t\t\t\t\t<view class=\"tp-pd-t-b-05\">规则说明：{{item.describe}}</view>\r\n\t\t\t\t\t\t<view class=\"tp-flex tp-flex-row tp-flex-j-r tp-flex-a-c tp-pd-t-b-15\">\r\n\t\t\t\t\t\t\t<view class=\"tp-flex tp-flex-row tp-flex-j-l tp-flex-a-c\" @click=\"toEdit(item)\">\r\n\t\t\t\t\t\t\t\t<view class=\"iconfont iconbianji tp-mg-r-10\"></view>编辑\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"tp-mg-l-r-25\">|</view>\r\n\t\t\t\t\t\t\t<view class=\"tp-flex tp-flex-row tp-flex-j-l tp-flex-a-c\" @click=\"toDel(item)\">\r\n\t\t\t\t\t\t\t\t<view class=\"iconfont iconshanchu tp-mg-r-10\"></view>删除\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</block>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 授权登录 -->\r\n\t\t<uni-popup ref=\"authPopup\" type=\"bottom\">\r\n\t\t\t<authorize @getuserinfo=\"getAuth\" @cancel=\"toCloseLogin\"></authorize>\r\n\t\t</uni-popup>\r\n\t\t<!-- 消息提示框 -->\r\n\t\t<cys-toast ref=\"toast\" :msg=\"toast.msg\" location=\"top\"></cys-toast>\r\n\t\t<Modal v-model=\"visible\" title='删除' text='确定要删除该条记录？' @cancel='cancel' @confirm='confirm' />\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t// import customizePopup from 'components/customize-popup/customize-popup'\r\n\timport Modal from '@/components/x-modal/x-modal'\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tModal\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttoast: {\r\n\t\t\t\t\tmsg: ''\r\n\t\t\t\t},\r\n\t\t\t\tvisible: false,\r\n\t\t\t\tisLogin: false,\r\n\t\t\t\tisGetPhone: false,\r\n\t\t\t\tisMore: false,\r\n\t\t\t\ttabIndex: 0,\r\n\t\t\t\ttabData: [{\r\n\t\t\t\t\t\tid: 1000,\r\n\t\t\t\t\t\ttitle: '猪场'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t// \tid: 1001,\r\n\t\t\t\t\t// \ttitle: '温棚'\r\n\t\t\t\t\t// }\r\n\t\t\t\t],\r\n\t\t\t\tdataList: [],\r\n\t\t\t\tclData: [{\r\n\t\t\t\t\t\tvalue: '0',\r\n\t\t\t\t\t\tlabel: '告警策略'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalue: '1',\r\n\t\t\t\t\t\tlabel: '控制策略'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tclName: '告警策略',\r\n\t\t\t\tcurrentDelId: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.$store.commit('zerOingOffser'); //清空日志页码\r\n\t\t\tthis.tabData = [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: uni.getStorageSync('ywid'),\r\n\t\t\t\t\ttitle: uni.getStorageSync('ywName')\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t\t// this.$store.commit('zerOingPage'); //清空页码\r\n\t\t\tthis.dataList = []\r\n\t\t\tif (this.clName == '告警策略') {\r\n\t\t\t\tthis.getDataList()\r\n\t\t\t} else if (this.clName == '控制策略') {\r\n\t\t\t\t//获取控制策略\r\n\t\t\t\tthis.getContorList()\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//切换控制策略\r\n\t\t\tchangCl(cl) {\r\n\t\t\t\tthis.clName = cl.label\r\n\t\t\t\tthis.isMore = false\r\n\t\t\t\tthis.dataList = []\r\n\t\t\t\t// this.$store.commit('zerOingPage'); //清空页码\r\n\t\t\t\tif (cl.value == '0') {\r\n\t\t\t\t\tthis.getDataList()\r\n\t\t\t\t} else if (cl.value == '1') {\r\n\t\t\t\t\t//获取控制策略\r\n\t\t\t\t\tthis.getContorList()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//获取控制策略\r\n\t\t\tgetContorList() {\r\n\t\t\t\tvar list = []\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t});\r\n\t\t\t\tthis.API.apiRequest('/api/automation/index', {\r\n\t\t\t\t\tbusiness_id: uni.getStorageSync('ywId'), //业务ID\r\n\t\t\t\t\tpage: this.$store.state.list.offset,\r\n\t\t\t\t\tlimit: 10\r\n\t\t\t\t}, 'post').then(res => {\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tvar data = res.data.data;\r\n\t\t\t\t\t\tvar lastTableData = [];\r\n\t\t\t\t\t\tif (data.length > 0) {\r\n\t\t\t\t\t\t\tlet pauArry = data;\r\n\t\t\t\t\t\t\t/* 分页 */\r\n\t\t\t\t\t\t\tlet pageSize = 10;\r\n\t\t\t\t\t\t\tif (pageSize == data.length) {\r\n\t\t\t\t\t\t\t\tthis.statusType = 'more';\r\n\t\t\t\t\t\t\t\tthis.loadMoreShow = true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.statusType = 'noMore';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet newTableData = this.dataList.concat(pauArry);\r\n\t\t\t\t\t\t\tlastTableData = newTableData;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.statusType = 'noMore';\r\n\t\t\t\t\t\t\tlastTableData = this.dataList.concat([]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.dataList = lastTableData;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.loadMoreShow = false;\r\n\t\t\t\t\t\tthis.statusType = 'noMore';\r\n\t\t\t\t\t\tthis.toast.msg = res.msg;\r\n\t\t\t\t\t\tthis.$refs.toast.show();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//获取告警列表\r\n\t\t\tgetDataList() {\r\n\t\t\t\tvar list = []\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t});\r\n\t\t\t\tthis.API.apiRequest('/api/warning/show', {\r\n\t\t\t\t\twid: uni.getStorageSync('ywId'),\r\n\t\t\t\t\tpage: this.$store.state.list.offset,\r\n\t\t\t\t\tlimit: 10\r\n\t\t\t\t}, 'post').then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\tvar lastTableData = [];\r\n\t\t\t\t\t\tif (data.length > 0) {\r\n\t\t\t\t\t\t\tlet pauArry = data;\r\n\t\t\t\t\t\t\t/* 分页 */\r\n\t\t\t\t\t\t\tlet pageSize = 10;\r\n\t\t\t\t\t\t\tif (pageSize == data.length) {\r\n\t\t\t\t\t\t\t\tthis.statusType = 'more';\r\n\t\t\t\t\t\t\t\tthis.loadMoreShow = true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.statusType = 'noMore';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet newTableData = this.dataList.concat(pauArry);\r\n\t\t\t\t\t\t\tlastTableData = newTableData;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.statusType = 'noMore';\r\n\t\t\t\t\t\t\tlastTableData = this.dataList.concat([]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.dataList = lastTableData;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.loadMoreShow = false;\r\n\t\t\t\t\t\tthis.statusType = 'noMore';\r\n\t\t\t\t\t\tthis.toast.msg = res.msg;\r\n\t\t\t\t\t\tthis.$refs.toast.show();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t}).finally(() => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//编辑\r\n\t\t\ttoEdit(item) {\r\n\t\t\t\tif (this.clName == '告警策略') {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../alert-strategy/edit-strategy?id=' + item.id\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif (this.clName == '控制策略') {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../alert-control/edit-control?id=' + item.id\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//取消删除\r\n\t\t\tcancel() {\r\n\t\t\t\tconsole.log(\"取消\")\r\n\t\t\t\tthis.visible = false\r\n\t\t\t},\r\n\t\t\t//确定删除\r\n\t\t\tconfirm() {\r\n\t\t\t\tif (this.clName == '告警策略') {\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.API.apiRequest('/api/warning/delete', {\r\n\t\t\t\t\t\tid: this.currentDelId\r\n\t\t\t\t\t}, 'post').then(res => {\r\n\t\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\t\tthis.visible = false\r\n\t\t\t\t\t\t\tthis.dataList = []\r\n\t\t\t\t\t\t\tthis.getDataList()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (this.clName == '控制策略') {\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.API.apiRequest('/api/automation/delete', {\r\n\t\t\t\t\t\tid: this.currentDelId\r\n\t\t\t\t\t}, 'post').then(res => {\r\n\t\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\t\tthis.visible = false\r\n\t\t\t\t\t\t\tthis.dataList = []\r\n\t\t\t\t\t\t\tthis.getContorList()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//删除\r\n\t\t\ttoDel(item) {\r\n\t\t\t\tthis.visible = true\r\n\t\t\t\tthis.currentDelId = item.id\r\n\t\t\t},\r\n\t\t\t//\r\n\t\t\tdoTab: function(index) {\r\n\t\t\t\tthis.tabIndex = index;\r\n\t\t\t},\r\n\t\t\t//\r\n\t\t\tdoOpenAlertStrategy: function() {\r\n\t\t\t\tif (this.clName == '控制策略') {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../alert-control/add-control'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif (this.clName == '告警策略') {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../alert-strategy/alert-strategy'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t//获取绑定的手机号\r\n\t\t\tgetPhoneNumber(e) {\r\n\t\t\t\tthis.wxData = e.detail\r\n\t\t\t\tthis.isGetPhone = false\r\n\t\t\t\tthis.toLogin()\r\n\t\t\t},\r\n\t\t\t//登录\r\n\t\t\ttoLogin() {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tif (!that.$login.isLoginType().isAuth) {\r\n\t\t\t\t\tthat.$refs.authPopup.open()\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 获取用户信息\r\n\t\t\t\t\tuni.login({\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tuni.setStorageSync('wx_code', res.code)\r\n\t\t\t\t\t\t\tlet url = \"/auth/login\";\r\n\t\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\t\tlogin_type: 'wechatmini',\r\n\t\t\t\t\t\t\t\tbusiness_id: '92a00bb5-f28e-4849-baa5-f1edd85649e6',\r\n\t\t\t\t\t\t\t\twx_code: uni.getStorageSync('wx_code'),\r\n\t\t\t\t\t\t\t\tiv: that.wxData.iv,\r\n\t\t\t\t\t\t\t\tencryptedData: that.wxData.encryptedData,\r\n\t\t\t\t\t\t\t\tname: JSON.parse(uni.getStorageSync('userWxInfo')).nickName,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthat.API.apiRequest(url, data, 'post').then(res => {\r\n\t\t\t\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '登录成功',\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tuni.setStorageSync('access_token', res.data.access_token)\r\n\t\t\t\t\t\t\t\t\tthat.userInfo = that.$login.isLoginType()\r\n\t\t\t\t\t\t\t\t\tthat.isLogin = true\r\n\t\t\t\t\t\t\t\t\tthat.$forceUpdate()\r\n\t\t\t\t\t\t\t\t\tthat.getDataList()\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthat.toast.msg = res.msg;\r\n\t\t\t\t\t\t\t\t\tthat.$refs.toast.show();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//关闭\r\n\t\t\ttoCloseLogin() {\r\n\t\t\t\tthis.$refs.authPopup.close()\r\n\t\t\t},\r\n\t\t\t//获取授权\r\n\t\t\tgetAuth() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\t//判断是否授权\r\n\t\t\t\tuni.getUserProfile({\r\n\t\t\t\t\tdesc: '登录',\r\n\t\t\t\t\tsuccess(infoRes) {\r\n\t\t\t\t\t\tconst userInfo = infoRes.userInfo;\r\n\t\t\t\t\t\tuni.setStorageSync('userWxInfo', JSON.stringify(userInfo))\r\n\t\t\t\t\t\tuni.setStorageSync('isAuth', '1')\r\n\t\t\t\t\t\tthat.isGetPhone = true\r\n\t\t\t\t\t\tthat.$refs.authPopup.close()\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\tconsole.log('未授权err==', err);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import '@/common/intelligent-control.css';\r\n</style>\n","import mod from \"-!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./intelligent-control.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./intelligent-control.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1673854888184\n      var cssReload = require(\"D:/software/HBuilderX.3.1.12.20210428/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}