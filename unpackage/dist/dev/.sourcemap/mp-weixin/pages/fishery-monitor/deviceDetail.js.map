{"version":3,"sources":["uni-app:///main.js","webpack:///E:/project/Y-渔业可视化/ThingsPanelPig0110/ThingsPanelPig/pages/fishery-monitor/deviceDetail.vue?ce0f","webpack:///E:/project/Y-渔业可视化/ThingsPanelPig0110/ThingsPanelPig/pages/fishery-monitor/deviceDetail.vue?7e69","webpack:///E:/project/Y-渔业可视化/ThingsPanelPig0110/ThingsPanelPig/pages/fishery-monitor/deviceDetail.vue?b969","webpack:///E:/project/Y-渔业可视化/ThingsPanelPig0110/ThingsPanelPig/pages/fishery-monitor/deviceDetail.vue?15a3","uni-app:///pages/fishery-monitor/deviceDetail.vue","webpack:///E:/project/Y-渔业可视化/ThingsPanelPig0110/ThingsPanelPig/pages/fishery-monitor/deviceDetail.vue?d1b7","webpack:///E:/project/Y-渔业可视化/ThingsPanelPig0110/ThingsPanelPig/pages/fishery-monitor/deviceDetail.vue?ca6c"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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A,0CANA;;AAQA;AACA,aAvCA;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aANA;AAOA;AACA;AACA,WADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAJA;AAKA;AACA,aARA;AASA;AACA;AACA;AACA;AACA;AACA,aAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAPA;AAQA;AACA;AACA,SA1FA,MA0FA;AACA;AACA;AACA;AACA;AACA,OApGA;AAqGA,KAvPA;AAwPA;AACA,cAzPA,sBAyPA,MAzPA,EAyPA,GAzPA,EAyPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,SAFA;AAGA,KAjQA;AAkQA;AACA,gBAnQA,wBAmQA,MAnQA,EAmQA,GAnQA,EAmQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCADA;AAEA,0BAFA;AAGA,YAHA,EAGA,IAHA,CAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAfA;AAgBA;AACA,KA1RA;AA2RA;AACA,cA5RA,wBA4RA;AACA;AACA,oBADA;;AAGA;AACA;AACA,uBAFA;AAGA,oBAHA;AAIA,iCAJA;AAKA,YALA,EAKA,IALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SArBA,MAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAlCA;AAmCA,KAnUA;AAoUA;AACA,WArUA,mBAqUA,GArUA,EAqUA,KArUA,EAqUA;AACA;AACA;AACA;AACA,KAzUA;AA0UA;AACA,cA3UA,wBA2UA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA,KAjVA;AAkVA;AACA,kBAnVA,4BAmVA;AACA;AACA,oBADA;;AAGA;AACA;AACA,eAFA;AAGA,gBAHA;AAIA;AACA;AACA;AANA,SAOA,MAPA,EAOA,IAPA,CAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAtBA,MAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OArCA;AAsCA,KA7XA;AA8XA;AACA,kBA/XA,4BA+XA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA,KArYA;AAsYA;AACA,cAvYA,sBAuYA,WAvYA,EAuYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UADA,CACA,CADA;AAEA,KAlZA;AAmZA,QAnZA,gBAmZA,CAnZA,EAmZA;AACA;AACA,KArZA;AAsZA,kBAtZA,0BAsZA,KAtZA,EAsZA,KAtZA,EAsZA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAtbA;AAubA,kBAvbA,4BAubA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UADA,CACA,MADA,IACA,GADA,GACA,iBADA;AAEA;AACA,uBADA,GACA,GADA,GACA,iBADA;AAEA,KAxcA,EA7FA,E;;;;;;;;;;;;;ACpNA;AAAA;AAAA;AAAA;AAAmpC,CAAgB,soCAAG,EAAC,C;;;;;;;;;;;ACAvqC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/fishery-monitor/deviceDetail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/fishery-monitor/deviceDetail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./deviceDetail.vue?vue&type=template&id=598c196e&scoped=true&\"\nvar renderjs\nimport script from \"./deviceDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./deviceDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./deviceDetail.vue?vue&type=style&index=0&id=598c196e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"598c196e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/fishery-monitor/deviceDetail.vue\"\nexport default component.exports","export * from \"-!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./deviceDetail.vue?vue&type=template&id=598c196e&scoped=true&\"","var components\ntry {\n  components = {\n    customNav: function() {\n      return import(\n        /* webpackChunkName: \"components/customNav/customNav\" */ \"@/components/customNav/customNav.vue\"\n      )\n    },\n    uniPopup: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      return _vm.$refs.logoPopup.close()\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./deviceDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./deviceDetail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view :style=\"{ height: pageHeight, background: '#f5f5f5' }\">\r\n\t\t<customNav iconColor='#1B1B1B' pageTitle='设备详情' style=\"padding-top: 50rpx;\"></customNav>\r\n\t\t<view class=\"content\" :style=\"{ marginTop: marginTopHeight, display: 'inline-block', width: '100%' }\">\r\n\t\t\t<view class=\"device\">\r\n\t\t\t\t<view class=\"device_img\">\r\n\t\t\t\t\t<image src=\"/static/image/device_icon.png\" mode=\"\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"device_info\">\r\n\t\t\t\t\t<view class=\"device_name\">\r\n\t\t\t\t\t\t<span class=\"name\">{{device_name}}</span>\r\n\t\t\t\t\t\t<span class=\"state green\" v-if=\"device_state == 1\">• 在线</span>\r\n\t\t\t\t\t\t<span class=\"state\" v-if=\"device_state == 0\">• 离线</span>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"updatetime\">\r\n\t\t\t\t\t\t更新时间: <span v-if=\"latest_ts_name\">{{latest_ts_name}}</span>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"jiance\" v-for=\"(chart,index) in device.chartData\" :key=\"chart\"\r\n\t\t\t\tv-if=\"device.chartData.length > 0\">\r\n\t\t\t\t<view class=\"jiance_t\" v-if=\"index == 0\">\r\n\t\t\t\t\t监测\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"jiance_c\">\r\n\t\t\t\t\t<view class=\"jiance_name\">\r\n\t\t\t\t\t\t{{chart.name}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- <canvas canvas-id=\"canvasLineB\" id=\"canvasLineB\" class=\"charts\" @touchstart=\"touchLineB\"></canvas> -->\r\n\t\t\t\t\t<canvas :canvas-id=\"'canvasLine'+index\" :id=\"'canvasLine'+index\" class=\"charts\"></canvas>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- <view class=\"jiance\">\r\n\t\t\t\t<view class=\"jiance_t\">\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"jiance_c\">\r\n\t\t\t\t\t<view class=\"jiance_name\">\r\n\t\t\t\t\t\t湿度曲线\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<canvas canvas-id=\"canvasLineB\" id=\"canvasLineB\" class=\"charts\" @touchstart=\"touchLineB\"></canvas>\r\n\t\t\t\t</view>\r\n\t\t\t</view> -->\r\n\t\t\t<view class=\"control\">\r\n\t\t\t\t<view class=\"control_t\">\r\n\t\t\t\t\t控制\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"control_l\" v-if=\"device.controlData.length > 0\">\r\n\t\t\t\t\t<block v-for=\"(item,index) in device.controlData\" :key=\"index\">\r\n\t\t\t\t\t\t<view class=\"control_l_item\">\r\n\t\t\t\t\t\t\t<view class=\"control_l_item_l\">\r\n\t\t\t\t\t\t\t\t<view class=\"iconfontImg\">\r\n\t\t\t\t\t\t\t\t\t<image src=\"/static/icon/device_close.png\" v-if=\"item.value == 0\">\r\n\t\t\t\t\t\t\t\t\t\t<image src=\"/static/icon/device_on.png\" v-if=\"item.value == 1\">\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view style=\"margin-left: 24rpx;\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"sp_item_title\">{{item.typeName}}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"sp_item_status\" v-if=\"item.state  == 0 && item.type == 'switch'\">关闭\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"sp_item_status\" v-if=\"item.state == 1 && item.type == 'switch'\">开启\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"control_l_item_r\" v-if=\"item.type == 'switch'\">\r\n\t\t\t\t\t\t\t\t<view class=\"control_l_item_r_switch\" @click=\"changSwitch(item,index)\">\r\n\t\t\t\t\t\t\t\t\t<image src=\"/static/icon/switch_on.png\" v-if=\"item.state == 1\">\r\n\t\t\t\t\t\t\t\t\t\t<image src=\"/static/icon/switch_close.png\" v-if=\"item.state == 0\"></text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view v-else class=\"send\">\r\n\t\t\t\t\t\t\t\t<input v-model=\"item.num\" class=\"sendNum\" type=\"text\" />\r\n\t\t\t\t\t\t\t\t<button @click=\"toSendNum(item)\">下发</button>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"warning\" v-if=\"warningData.length > 0\">\r\n\t\t\t\t<view class=\"warning_t\">\r\n\t\t\t\t\t告警\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"warning_c\" v-for=\"(warn, index) in warningData\" :key=\"index\">\r\n\t\t\t\t\t<view class=\"warning_c_l\">\r\n\t\t\t\t\t\t<!-- <view class=\"warning_c_l_img\">\r\n\t\t\t\t\t\t\t<img src=\"/static/image/warning_icon.png\">\r\n\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t<view class=\"warning_c_l_i\">\r\n\t\t\t\t\t\t\t<view class=\"warning_c_l_i_t\">\r\n\t\t\t\t\t\t\t\t{{warn.describe}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- <view class=\"warning_c_l_i_c\">\r\n\t\t\t\t\t\t\t\t超过预警值3℃\r\n\t\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- <view class=\"warning_c_r\">\r\n\t\t\t\t\t\t<view class=\"warning_c_r_btn\">\r\n\t\t\t\t\t\t\t<img src=\"/static/image/horse.png\" alt=\"\">\r\n\t\t\t\t\t\t\t<span>{{item.business_name}}</span>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view> -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"history\">\r\n\t\t\t\t<view class=\"tp-title tp-mg-t-25\" style=\"margin-top: 35rpx; margin-left: 55rpx; margin-bottom: 10rpx\">日志\r\n\t\t\t\t</view>\r\n\t\t\t\t<block>\r\n\t\t\t\t\t<view class=\"tp-log tp-flex tp-flex-col tp-mg-t-15\">\r\n\t\t\t\t\t\t<view class=\"tp-panel tp-flex tp-flex-col tp-box-sizing tp-pd-20\"\r\n\t\t\t\t\t\t\tv-for=\"(item,index) in logData\" :key=\"index\" @click=\"logInfo(item, index)\">\r\n\t\t\t\t\t\t\t<view class=\"tp-log-item tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c\">\r\n\t\t\t\t\t\t\t\t<view class=\"tp-time\">{{item.cteate_time}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"tp-circle tp-mg-l-r-20\" :class=\"index==currentIndex?'tp-active':'' \"\r\n\t\t\t\t\t\t\t\t\tstyle=\"margin-left: 10rpx;\">\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"tp-flex-1\">{{item.remark}}</view>\r\n\t\t\t\t\t\t\t\t<view v-if=\"index==currentIndex\">\r\n\t\t\t\t\t\t\t\t\t<image src=\"../../static/icon/log_icon_on.png\"></image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view v-else>\r\n\t\t\t\t\t\t\t\t\t<image src=\"../../static/icon/log_icon.png\"></image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 分页加载 -->\r\n\t\t\t\t\t\t<!-- <view class=\"uni-tab-bar-loading\" @click=\"toLoadMore(active)\" v-if=\"loadMoreShow\">\r\n\t\t\t\t\t\t\t<uni-load-more :status=\"statusType\" :contentText=\"contentText\"></uni-load-more>\r\n\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</block>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 日志详情 -->\r\n\t\t<uni-popup ref=\"logoPopup\" type=\"bottom\" :mask=\"true\" :maskClick=\"true\">\r\n\t\t\t<view class=\"logInfo\">\r\n\t\t\t\t<view class=\"info_title\">\r\n\t\t\t\t\t日志详情\r\n\t\t\t\t\t<image src=\"../../static/icon/close.png\" alt=\"\" @click=\"$refs.logoPopup.close()\">\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"info_header\">\r\n\t\t\t\t\t<view class=\"tp-circle tp-mg-l-r-20 tp-active\" style=\"margin-left: 10rpx;\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info_header_d\">\r\n\t\t\t\t\t\t{{currentLog.remark}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<span class=\"info_header_t\">{{currentLog.cteate_time}}</span>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"info_list\">\r\n\t\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t\t<view class=\"value\">\r\n\t\t\t\t\t\t\t设备名称：\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"label\">\r\n\t\t\t\t\t\t\t{{currentLog.device_name}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t\t<view class=\"value\">\r\n\t\t\t\t\t\t\t设备分组名称：\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"label\">\r\n\t\t\t\t\t\t\t{{currentLog.asset_name}}>{{currentLog.device_name}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t\t<view class=\"value\">\r\n\t\t\t\t\t\t\t业务名称：\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"label\">\r\n\t\t\t\t\t\t\t{{currentLog.business_name}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t\t<view class=\"value\">\r\n\t\t\t\t\t\t\t操作类型：\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"label\" v-if=\"currentLog.operation_type == '1'\">\r\n\t\t\t\t\t\t\t定时触发\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"label\" v-if=\"currentLog.operation_type == '2'\">\r\n\t\t\t\t\t\t\t手动控制\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t\t<view class=\"value\">\r\n\t\t\t\t\t\t\t指令：\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"label\">\r\n\t\t\t\t\t\t\t{{currentLog.instruct}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t\t<view class=\"value\">\r\n\t\t\t\t\t\t\t发送结果：\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"label\" v-if=\"currentLog.send_result == '1'\">\r\n\t\t\t\t\t\t\t成功\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"label\" v-if=\"currentLog.send_result == '2'\">\r\n\t\t\t\t\t\t\t失败\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport uCharts from '@/components/u-charts/u-charts.min.js';\r\n\timport customNav from '@/components/customNav/customNav.vue';\r\n\tvar canvaLineA = null;\r\n\tvar canvaLineB = null;\r\n\texport default {\r\n\t\tcomponents: {customNav},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcurrentIndex: 0,\r\n\t\t\t\tcurrentLog: {},\r\n\t\t\t\tcurrentLog: {},\r\n\t\t\t\tstatusType: 'more', //分页状态\r\n\t\t\t\tloadMoreShow: true,\r\n\t\t\t\tcontentText: {\r\n\t\t\t\t\tcontentdown: '上拉显示更多日志',\r\n\t\t\t\t\tcontentrefresh: '正在加载...',\r\n\t\t\t\t\tcontentnomore: '没有日志了'\r\n\t\t\t\t},\r\n\t\t\t\tdeviceSwtichList: [{\r\n\t\t\t\t\t\tvalue: 0,\r\n\t\t\t\t\t\tname: '风机'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\t\tname: '水帘'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\t\tname: '照明'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tpageHeight: 0,\r\n\t\t\t\tmarginTopHeight: 0,\r\n\t\t\t\tchartDataA: {\r\n\t\t\t\t\tcategories: [\"2016\", \"2017\", \"2018\", \"2019\", \"2020\", \"2021\"],\r\n\t\t\t\t\tseries: [{\r\n\t\t\t\t\t\tdata: [35, 36, 31, 33, 13, 34]\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\tchartDataB: {\r\n\t\t\t\t\tcategories: [\"2016\", \"2017\", \"2018\", \"2019\", \"2020\", \"2021\"],\r\n\t\t\t\t\tseries: [{\r\n\t\t\t\t\t\tname: \"目标值\",\r\n\t\t\t\t\t\tdata: [35, 36, 31, 33, 13, 34]\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\tcWidth: '',\r\n\t\t\t\tcHeight: '',\r\n\t\t\t\tpixelRatio: 1,\r\n\t\t\t\tdeviceType: '',\r\n\t\t\t\tdevice: {\r\n\t\t\t\t\tstate: '',\r\n\t\t\t\t\tcontrolData: []\r\n\t\t\t\t},\r\n\t\t\t\tdevice_id: '',\r\n\t\t\t\tdevice_name: '',\r\n\t\t\t\tlatest_ts_name: '',\r\n\t\t\t\tdevice_state: '',\r\n\t\t\t\tend_time: '',\r\n\t\t\t\tstart_time: '',\r\n\t\t\t\tlogData: [],\r\n\t\t\t\tstatusWarnType: 'more',\r\n\t\t\t\tloadMoreWarnShow: true,\r\n\t\t\t\tstatusType: 'more', //分页状态\r\n\t\t\t\tloadMoreShow: true,\r\n\t\t\t\tcontentText: {\r\n\t\t\t\t\tcontentdown: '上拉显示更多数据',\r\n\t\t\t\t\tcontentrefresh: '正在加载...',\r\n\t\t\t\t\tcontentnomore: '没有数据了'\r\n\t\t\t\t},\r\n\t\t\t\twarningData: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tconsole.log(\"getSystemInfoSync\",uni.getSystemInfoSync());\r\n\t\t\tthis.$store.commit('zerOingOffser'); //清空日志页码\r\n\t\t\tthis.$store.commit('zerOingEqupPage'); //清空告警页码\r\n\t\t\tthis.device_name = options.device_name\r\n\t\t\tthis.deviceType = options.type\r\n\t\t\tthis.device_id = options.device_id\r\n\t\t\tif (options.latest_ts_name != \"undefined\") {\r\n\t\t\t\tthis.latest_ts_name = options.latest_ts_name\r\n\t\t\t}\r\n\t\t\tthis.device_state = options.state\r\n\t\t\tthis.cWidth = uni.upx2px(750);\r\n\t\t\tthis.cHeight = uni.upx2px(420);\r\n\t\t\tthis.getCurrentTime()\r\n\t\t\t// this.getDeviceHistory() // 获取曲线数据\r\n\t\t\tthis.getLogData() //获取日志\r\n\t\t\tthis.getWarningData() //获取告警信息\r\n\t\t\tthis.getDetail()\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.marginTopHeight = uni.getStorageSync('contentPaddingTop');\r\n\t\t\tthis.pageHeight = uni.getStorageSync('pageHeight');\r\n\t\t},\r\n\t\tonReady() {},\r\n\t\tmethods: {\r\n\t\t\t// 数值下发\r\n\t\t\ttoSendNum(item) {\r\n\t\t\t\tif (item.dataType == 'float') {\r\n\t\t\t\t\titem.num = parseFloat(item.num)\r\n\t\t\t\t} else if (item.dataType == 'String') {\r\n\t\t\t\t\titem.num = item.num.toString()\r\n\t\t\t\t} else if (item.dataType == 'Integer') {\r\n\t\t\t\t\titem.num = parseInt(item.num)\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log('item===', item)\r\n\t\t\t\tif (item.num < item.dataRange.split('-')[1] && item.num >= item.dataRange.split('-')[0]) {\r\n\t\t\t\t\tconst params = {\r\n\t\t\t\t\t\tdevice_id: this.device_id,\r\n\t\t\t\t\t\tvalues: {\r\n\t\t\t\t\t\t\t[item.name]: item.num\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log('params===', params)\r\n\t\t\t\t\tthis.API.apiRequest('/api/device/operating_device', params, 'post').then(res => {\r\n\t\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t\tthis.getCurrentTime()\r\n\t\t\t\t\t\t\t// this.getDeviceHistory() // 获取曲线数据\r\n\t\t\t\t\t\t\tthis.getLogData() //获取日志\r\n\t\t\t\t\t\t\tthis.getWarningData() //获取告警信息\r\n\t\t\t\t\t\t\tthis.getDetail()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast('非法输入')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 获取设备的历史数据\r\n\t\t\tgetDeviceHistory(canvasLineId, itme) {\r\n\t\t\t\tlet timestamp = (new Date()).getTime();\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t});\r\n\t\t\t\tthis.API.apiRequest('/api/kv/history', {\r\n\t\t\t\t\tdevice_id: this.device_id,\r\n\t\t\t\t\tstart_ts: timestamp - 246060 * 1000,\r\n\t\t\t\t\tend_ts: timestamp,\r\n\t\t\t\t\trate: 10 * 1000 * 1000, // 微秒,\r\n\t\t\t\t\tattribute: itme.attribute.concat([\"systime\"])\r\n\t\t\t\t}, 'post').then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tvar data = res.data.systime\r\n\t\t\t\t\t\tvar yData = [];\r\n\t\t\t\t\t\tfor (let key in res.data) {\r\n\t\t\t\t\t\t\tif (itme.attribute[0] == key) {\r\n\t\t\t\t\t\t\t\tyData = res.data[key]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar newArry = []\r\n\t\t\t\t\t\tvar xData = []\r\n\t\t\t\t\t\tdata.forEach(item => {\r\n\t\t\t\t\t\t\tvar index = item.lastIndexOf(' ')\r\n\t\t\t\t\t\t\tnewArry.push(item.substring(index, item.length))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tnewArry.forEach(item => {\r\n\t\t\t\t\t\t\tvar index = item.lastIndexOf(':')\r\n\t\t\t\t\t\t\txData.push(item.substring(0, index))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.showLine(canvasLineId, xData, yData)\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t}\r\n\t\t\t\t}).finally(() => {});\r\n\t\t\t},\r\n\t\t\t// 改变状态\r\n\t\t\tchangSwitch(item, index) {\r\n\t\t\t\tconsole.log(\"item\",item);\r\n\t\t\t\tif (item.state == 0) {\r\n\t\t\t\t\t// item.state = 1\r\n\t\t\t\t\tthis.$set(this.device.controlData[index],state,1);\r\n\t\t\t\t} else if (item.state == 1) {\r\n\t\t\t\t\t// item.state = 0\r\n\t\t\t\t\tthis.$set(this.device.controlData[index],state,0);\r\n\t\t\t\t}\r\n\t\t\t\t// this.$forceUpdate()\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tdevice_id: this.device_id,\r\n\t\t\t\t\tvalues: {\r\n\t\t\t\t\t\t[item.name]: item.state\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.API.apiRequest('/api/device/operating_device', params, 'post').then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.getCurrentTime()\r\n\t\t\t\t\t\t// this.getDeviceHistory() // 获取曲线数据\r\n\t\t\t\t\t\tthis.getLogData() //获取日志\r\n\t\t\t\t\t\tthis.getWarningData() //获取告警信息\r\n\t\t\t\t\t\tthis.getDetail()\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获取曲线图\r\n\t\t\tshowLine(canvasId, xData, yData) {\r\n\t\t\t\tvar canvaLine = new uCharts({\r\n\t\t\t\t\t$this: this,\r\n\t\t\t\t\tenableScroll: true,\r\n\t\t\t\t\tcolors: [\"#1890FF\", '#F88B33'],\r\n\t\t\t\t\tcanvasId: canvasId,\r\n\t\t\t\t\ttype: 'line',\r\n\t\t\t\t\tfontSize: 11,\r\n\t\t\t\t\tpadding: [15, 20, 10, 15], //上右下左\r\n\t\t\t\t\tlegend: {\r\n\t\t\t\t\t\tshow: false,\r\n\t\t\t\t\t\tpadding: 5,\r\n\t\t\t\t\t\tlineHeight: 11,\r\n\t\t\t\t\t\tmargin: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdataLabel: true,\r\n\t\t\t\t\tdataPointShape: false,\r\n\t\t\t\t\tbackground: '#FFFFFF',\r\n\t\t\t\t\tpixelRatio: this.pixelRatio,\r\n\t\t\t\t\tcategories: xData,\r\n\t\t\t\t\tseries: [{\r\n\t\t\t\t\t\tdata: yData\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tanimation: true,\r\n\t\t\t\t\txAxis: {\r\n\t\t\t\t\t\tdisableGrid: true,\r\n\t\t\t\t\t\tscrollShow: true,\r\n\t\t\t\t\t\titemCount: 5,\r\n\t\t\t\t\t\tscrollAlign: 'left', //滚动条初始位置\r\n\t\t\t\t\t},\r\n\t\t\t\t\tyAxis: {\r\n\t\t\t\t\t\tgridType: 'solid',\r\n\t\t\t\t\t\tgridColor: '#f7f7f7',\r\n\t\t\t\t\t\taxisLineColor: '#f7f7f7',\r\n\t\t\t\t\t\tfontColor: '#999999',\r\n\t\t\t\t\t\tdashLength: 5,\r\n\t\t\t\t\t\tsplitNumber: 5,\r\n\t\t\t\t\t\tformat: (val) => {\r\n\t\t\t\t\t\t\treturn val.toFixed(0)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\twidth: this.cWidth * this.pixelRatio,\r\n\t\t\t\t\theight: this.cHeight * this.pixelRatio\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 插件查询\r\n\t\t\tgetDetail() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t});\r\n\t\t\t\tthis.API.apiRequest('/api/device/model/list', {\r\n\t\t\t\t\tid: this.deviceType,\r\n\t\t\t\t\tcurrent_page: 1,\r\n\t\t\t\t\tper_page: 1\r\n\t\t\t\t}, 'post').then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tvar data = res.data.data[0];\r\n\t\t\t\t\t\tconsole.log(\"controlData\",data);\r\n\t\t\t\t\t\tthis.device.valuesNew = []\r\n\t\t\t\t\t\tthis.device.controlData = []\r\n\t\t\t\t\t\tthis.device.chartData = []\r\n\t\t\t\t\t\tthis.device.chart_data = JSON.parse(data.chart_data)\r\n\t\t\t\t\t\t// \r\n\t\t\t\t\t\tif (this.device.chart_data.chart.length > 0) {\r\n\t\t\t\t\t\t\tthis.device.chart_data.chart.forEach((ch, index) => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"ch\",ch);\r\n\t\t\t\t\t\t\t\tif (ch.controlType == 'dashboard') {\r\n\t\t\t\t\t\t\t\t\tif (ch.mapping && ch.mapping.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\tch.mapping.forEach(map => {\r\n\t\t\t\t\t\t\t\t\t\t\tvar obj = {\r\n\t\t\t\t\t\t\t\t\t\t\t\tname: map,\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: '',\r\n\t\t\t\t\t\t\t\t\t\t\t\tunit: ''\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tthis.device.valuesNew.push(obj)\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (ch.controlType == 'control') {\r\n\t\t\t\t\t\t\t\t\tvar obj = {\r\n\t\t\t\t\t\t\t\t\t\tname: ch.series[0].mapping.value,\r\n\t\t\t\t\t\t\t\t\t\ttypeName: ch.name,\r\n\t\t\t\t\t\t\t\t\t\tstate: '',\r\n\t\t\t\t\t\t\t\t\t\tid: ch.id,\r\n\t\t\t\t\t\t\t\t\t\tdisabled: ch.disabled,\r\n\t\t\t\t\t\t\t\t\t\ttype: ch.type,\r\n\t\t\t\t\t\t\t\t\t\tnum: ch.series[0].value,\r\n\t\t\t\t\t\t\t\t\t\tdataType: ch.series[0].mapping.attr.dataType,\r\n\t\t\t\t\t\t\t\t\t\tdataRange: ch.series[0].mapping.attr.dataRange\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthis.device.controlData.push(obj)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (ch.controlType == 'history') {\r\n\t\t\t\t\t\t\t\t\tthis.device.chartData.push({\r\n\t\t\t\t\t\t\t\t\t\tattribute: ch.mapping,\r\n\t\t\t\t\t\t\t\t\t\tname: ch.name,\r\n\t\t\t\t\t\t\t\t\t\tseries: ch.series,\r\n\t\t\t\t\t\t\t\t\t\txAxis: ch.xAxis,\r\n\t\t\t\t\t\t\t\t\t\tyAxis: ch.yAxis,\r\n\t\t\t\t\t\t\t\t\t\tid: 'canvasLine' + index\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.device.valuesNew.length > 0) {\r\n\t\t\t\t\t\t\tthis.device.valuesNew.forEach(va => {\r\n\t\t\t\t\t\t\t\tfor (let key in this.device.values) {\r\n\t\t\t\t\t\t\t\t\tif (va.name == key) {\r\n\t\t\t\t\t\t\t\t\t\tva.value = this.device.values[key]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.device.chart_data.tsl.properties && this.device.chart_data.tsl.properties.length >\r\n\t\t\t\t\t\t\t0) {\r\n\t\t\t\t\t\t\tthis.device.chart_data.tsl.properties.forEach(d => {\r\n\t\t\t\t\t\t\t\tif (this.device.valuesNew && this.device.valuesNew.length > 0) {\r\n\t\t\t\t\t\t\t\t\tthis.device.valuesNew.forEach(i => {\r\n\t\t\t\t\t\t\t\t\t\tif (d.name == i.name) {\r\n\t\t\t\t\t\t\t\t\t\t\ti.unit = d.unit\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.device.chartData.length > 0) {\r\n\t\t\t\t\t\t\tthis.device.chartData.forEach((itme, index) => {\r\n\t\t\t\t\t\t\t\tvar canvasLineId = 'canvasLine' + index\r\n\t\t\t\t\t\t\t\tthis.getDeviceHistory(canvasLineId, itme)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// this.showLineA(\"canvasLineA\", this.chartDataA)\r\n\t\t\t\t\t\t// this.showLineB(\"canvasLineB\", this.chartDataB)\r\n\t\t\t\t\t\tif (this.device.controlData.length > 0) {\r\n\t\t\t\t\t\t\tthis.device.controlData.forEach(va => {\r\n\t\t\t\t\t\t\t\tfor (let key in this.device.values) {\r\n\t\t\t\t\t\t\t\t\tif (va.name == key) {\r\n\t\t\t\t\t\t\t\t\t\tva.state = this.device.values[key]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.getContorl(this.device, va)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.$forceUpdate()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.toast.msg = res.msg;\r\n\t\t\t\t\t\tthis.$refs.toast.show();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 定时获取开关\r\n\t\t\tgetContorl(device, con) {\r\n\t\t\t\tconst delayTime = 60 * 1000\r\n\t\t\t\tthis.getDevieceKv(device, con)\r\n\t\t\t\t// 清除定时器\r\n\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\tthis.timer = setInterval(() => {\r\n\t\t\t\t\tthis.getContorl(device, con)\r\n\t\t\t\t}, delayTime)\r\n\t\t\t},\r\n\t\t\t// 获取设备的开关状态\r\n\t\t\tgetDevieceKv(device, con) {\r\n\t\t\t\tvar newArry = []\r\n\t\t\t\tnewArry.push(con.name)\r\n\t\t\t\t// uni.showLoading({\r\n\t\t\t\t// \ttitle: '加载中'\r\n\t\t\t\t// });\r\n\t\t\t\tthis.API.apiRequest('/api/kv/current', {\r\n\t\t\t\t\tentity_id: this.device_id,\r\n\t\t\t\t\tattribute: newArry\r\n\t\t\t\t}, 'post').then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t// uni.hideLoading()\r\n\t\t\t\t\t\tif (res.data && res.data.length > 0) {\r\n\t\t\t\t\t\t\tfor (let key in res.data[0]) {\r\n\t\t\t\t\t\t\t\tif (con.name == key && res.data[0][key]) {\r\n\t\t\t\t\t\t\t\t\tcon.state = res.data[0][key]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.$forceUpdate()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log('====', this.device)\r\n\t\t\t},\r\n\t\t\t//获取操作日志\r\n\t\t\tgetLogData() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t});\r\n\t\t\t\tthis.API.apiRequest('/api/conditions/log/index', {\r\n\t\t\t\t\t// current_page: this.$store.state.list.offset,\r\n\t\t\t\t\tcurrent_page: 1,\r\n\t\t\t\t\tper_page: 10,\r\n\t\t\t\t\tdevice_id: this.device_id\r\n\t\t\t\t}, 'post').then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.logData = res.data.data;\r\n\t\t\t\t\t\t// var lastTableData = [];\r\n\t\t\t\t\t\t// if (data.length > 0) {\r\n\t\t\t\t\t\t// \tlet pauArry = data;\r\n\t\t\t\t\t\t// \t/* 分页 */\r\n\t\t\t\t\t\t// \tlet pageSize = 10;\r\n\t\t\t\t\t\t// \tif (pageSize == data.length) {\r\n\t\t\t\t\t\t// \t\tthis.statusType = 'more';\r\n\t\t\t\t\t\t// \t\tthis.loadMoreShow = true;\r\n\t\t\t\t\t\t// \t} else {\r\n\t\t\t\t\t\t// \t\tthis.statusType = 'noMore';\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// \tlet newTableData = this.logData.concat(pauArry);\r\n\t\t\t\t\t\t// \tlastTableData = newTableData;\r\n\t\t\t\t\t\t// } else {\r\n\t\t\t\t\t\t// \tthis.statusType = 'noMore';\r\n\t\t\t\t\t\t// \tlastTableData = this.logData.concat([]);\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t// this.logData = lastTableData;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// this.loadMoreShow = false;\r\n\t\t\t\t\t\t// this.statusType = 'noMore';\r\n\t\t\t\t\t\tthis.toast.msg = res.msg;\r\n\t\t\t\t\t\tthis.$refs.toast.show();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 日志详情\r\n\t\t\tlogInfo(log, index) {\r\n\t\t\t\tthis.currentLog = log\r\n\t\t\t\tthis.currentIndex = index\r\n\t\t\t\tthis.$refs.logoPopup.open()\r\n\t\t\t},\r\n\t\t\t// 加载更多\r\n\t\t\ttoLoadMore() {\r\n\t\t\t\t// 还有数据\r\n\t\t\t\tif (this.statusType == 'more') {\r\n\t\t\t\t\tthis.$store.commit('addOffset');\r\n\t\t\t\t\tthis.getLogData();\r\n\t\t\t\t} else if (this.statusType == 'noMore') {}\r\n\t\t\t},\r\n\t\t\t// 获取设备告警信息\r\n\t\t\tgetWarningData() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t});\r\n\t\t\t\tthis.API.apiRequest('/api/warning/log/list', {\r\n\t\t\t\t\t// current_page: this.$store.state.list.equpPage,\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tlimit: 5,\r\n\t\t\t\t\tdevice_id: this.device_id,\r\n\t\t\t\t\t// start_date: this.start_time,\r\n\t\t\t\t\t// end_date: this.end_time\r\n\t\t\t\t}, 'post').then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.warningData = res.data.data;\r\n\t\t\t\t\t\t// var data = res.data.data;\r\n\t\t\t\t\t\t// var lastTableData = [];\r\n\t\t\t\t\t\t// if (data.length > 0) {\r\n\t\t\t\t\t\t// \tlet pauArry = data;\r\n\t\t\t\t\t\t// \t/* 分页 */\r\n\t\t\t\t\t\t// \tlet pageSize = 10;\r\n\t\t\t\t\t\t// \tif (pageSize == data.length) {\r\n\t\t\t\t\t\t// \t\tthis.statusWarnType = 'more';\r\n\t\t\t\t\t\t// \t\tthis.loadMoreWarnShow = true;\r\n\t\t\t\t\t\t// \t} else {\r\n\t\t\t\t\t\t// \t\tthis.statusWarnType = 'noMore';\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// \tlet newTableData = this.warningData.concat(pauArry);\r\n\t\t\t\t\t\t// \tlastTableData = newTableData;\r\n\t\t\t\t\t\t// } else {\r\n\t\t\t\t\t\t// \tthis.statusWarnType = 'noMore';\r\n\t\t\t\t\t\t// \tlastTableData = this.warningData.concat([]);\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t// this.warningData = lastTableData;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// this.loadMoreWarnShow = false;\r\n\t\t\t\t\t\t// this.statusWarnType = 'noMore';\r\n\t\t\t\t\t\tthis.toast.msg = res.msg;\r\n\t\t\t\t\t\tthis.$refs.toast.show();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 加载更多\r\n\t\t\ttoLoadWarnMore() {\r\n\t\t\t\t// 还有数据\r\n\t\t\t\tif (this.statusWarnType == 'more') {\r\n\t\t\t\t\tthis.$store.commit('addEqupPage');\r\n\t\t\t\t\tthis.getWarningData();\r\n\t\t\t\t} else if (this.statusWarnType == 'noMore') {}\r\n\t\t\t},\r\n\t\t\t// 时间格式转化\r\n\t\t\tformatDate(shijianchuo) {\r\n\t\t\t\t//shijianchuo是整数，否则要parseInt转换\r\n\t\t\t\tvar time = new Date(shijianchuo / 1000);\r\n\t\t\t\tvar y = time.getFullYear();\r\n\t\t\t\tvar m = time.getMonth() + 1;\r\n\t\t\t\tvar d = time.getDate();\r\n\t\t\t\tvar h = time.getHours();\r\n\t\t\t\tvar mm = time.getMinutes();\r\n\t\t\t\tvar s = time.getSeconds();\r\n\t\t\t\treturn y + '-' + this.add0(m) + '-' + this.add0(d) + ' ' + this.add0(h) + ':' + this.add0(mm) + ':' + this\r\n\t\t\t\t\t.add0(s);\r\n\t\t\t},\r\n\t\t\tadd0(m) {\r\n\t\t\t\treturn m < 10 ? '0' + m : m\r\n\t\t\t},\r\n\t\t\tTimeDifference(time1, time2) {\r\n\t\t\t\t//判断开始时间是否大于结束日期\r\n\t\t\t\tif (time1 > time2) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//截取字符串，得到日期部分\"2009-12-02\",用split把字符串分隔成数组\r\n\t\t\t\tvar begin1 = time1.substr(0, 10).split(\"-\");\r\n\t\t\t\tvar end1 = time2.substr(0, 10).split(\"-\");\r\n\r\n\t\t\t\t//将拆分的数组重新组合，并实例成化新的日期对象\r\n\t\t\t\tvar date1 = new Date(begin1[1] + - +begin1[2] + - +begin1[0]);\r\n\t\t\t\tvar date2 = new Date(end1[1] + - +end1[2] + - +end1[0]);\r\n\r\n\t\t\t\t//得到两个日期之间的差值m，以分钟为单位\r\n\t\t\t\t//Math.abs(date2-date1)计算出以毫秒为单位的差值\r\n\t\t\t\t//Math.abs(date2-date1)/1000得到以秒为单位的差值\r\n\t\t\t\t//Math.abs(date2-date1)/1000/60得到以分钟为单位的差值\r\n\t\t\t\tvar m = parseInt(Math.abs(date2 - date1) / 1000 / 60);\r\n\r\n\t\t\t\t//小时数和分钟数相加得到总的分钟数\r\n\t\t\t\t//time1.substr(11,2)截取字符串得到时间的小时数\r\n\t\t\t\t//parseInt(time1.substr(11,2))*60把小时数转化成为分钟\r\n\t\t\t\tvar min1 = parseInt(time1.substr(11, 2)) * 60 + parseInt(time1.substr(14, 2));\r\n\t\t\t\tvar min2 = parseInt(time2.substr(11, 2)) * 60 + parseInt(time2.substr(14, 2));\r\n\r\n\t\t\t\t//两个分钟数相减得到时间部分的差值，以分钟为单位\r\n\t\t\t\tvar n = min2 - min1;\r\n\r\n\t\t\t\t//将日期和时间两个部分计算出来的差值相加，即得到两个时间相减后的分钟数\r\n\t\t\t\tvar minutes = m + n;\r\n\t\t\t\treturn minutes\r\n\t\t\t},\r\n\t\t\tgetCurrentTime() {\r\n\t\t\t\t//年\r\n\t\t\t\tlet year = new Date().getFullYear();\r\n\t\t\t\t//月份是从0月开始获取的，所以要+1;\r\n\t\t\t\tlet month = new Date().getMonth() + 1;\r\n\t\t\t\t//日\r\n\t\t\t\tlet day = new Date().getDate();\r\n\t\t\t\t//时\r\n\t\t\t\tlet hour = new Date().getHours();\r\n\t\t\t\t//分\r\n\t\t\t\tlet minute = new Date().getMinutes();\r\n\t\t\t\t//秒\r\n\t\t\t\tlet second = new Date().getSeconds()\r\n\t\t\t\tthis.end_time = year + '-' + this.add0(month) + '-' + this.add0(day) + ' ' + this.add0(hour) + ':' + this\r\n\t\t\t\t\t.add0(minute) + ':' + this.add0(second)\r\n\t\t\t\tthis.start_time = year + '-' + this.add0(month) + '-' + this.add0(day - 1) + ' ' + this.add0(hour) + ':' +\r\n\t\t\t\t\tthis.add0(minute) + ':' + this.add0(second)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t@import '@/common/fishery-monitor.css';\r\n\t@import '@/common/deviceDetail.css';\r\n</style>\n","import mod from \"-!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./deviceDetail.vue?vue&type=style&index=0&id=598c196e&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\software\\\\HBuilderX.3.1.12.20210428\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./deviceDetail.vue?vue&type=style&index=0&id=598c196e&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1673854888209\n      var cssReload = require(\"D:/software/HBuilderX.3.1.12.20210428/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}